--// Kh·ªüi t·∫°o GUI nh·∫≠p key
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local HttpService = game:GetService("HttpService")
local StarterGui = game:GetService("StarterGui")

local KEY_URL = "https://raw.githubusercontent.com/dung145/ZENX/refs/heads/main/key.txt" -- Thay b·∫±ng link RAW GitHub ch·ª©a key

-- T·∫°o GUI nh·∫≠p key
local gui = Instance.new("ScreenGui", game:GetService("CoreGui"))
gui.Name = "KeyCheckGUI"

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 300, 0, 160)
frame.Position = UDim2.new(0.5, -150, 0.5, -80)
frame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.BackgroundTransparency = 0.1

local uicorner = Instance.new("UICorner", frame)
uicorner.CornerRadius = UDim.new(0, 12)

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 35)
title.BackgroundTransparency = 1
title.Text = "NH·∫¨P KEY ƒê·ªÇ TI·∫æP T·ª§C"
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.TextColor3 = Color3.fromRGB(255, 255, 255)

local textbox = Instance.new("TextBox", frame)
textbox.Size = UDim2.new(1, -40, 0, 35)
textbox.Position = UDim2.new(0, 20, 0, 50)
textbox.PlaceholderText = "Nh·∫≠p key t·∫°i ƒë√¢y..."
textbox.Font = Enum.Font.Gotham
textbox.TextSize = 16
textbox.TextColor3 = Color3.fromRGB(255, 255, 255)
textbox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
textbox.ClearTextOnFocus = false
textbox.Text = ""
local corner2 = Instance.new("UICorner", textbox)
corner2.CornerRadius = UDim.new(0, 8)

local button = Instance.new("TextButton", frame)
button.Size = UDim2.new(0.5, -25, 0, 35)
button.Position = UDim2.new(0.5, 5, 1, -45)
button.Text = "X√ÅC NH·∫¨N"
button.Font = Enum.Font.GothamBold
button.TextSize = 16
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.BackgroundColor3 = Color3.fromRGB(60, 120, 200)
local corner3 = Instance.new("UICorner", button)
corner3.CornerRadius = UDim.new(0, 8)

-- H√†m g·ª≠i th√¥ng b√°o nh·ªè
local function notify(title, text, duration)
	pcall(function()
		StarterGui:SetCore("SendNotification", {
			Title = title or "Th√¥ng b√°o",
			Text = text or "",
			Duration = duration or 5
		})
	end)
end

-- H√†m l·∫•y danh s√°ch key t·ª´ GitHub
local function getKeyList()
	local success, response = pcall(function()
		return game:HttpGet(KEY_URL)
	end)

	if success and response then
		local keyList = {}
		for line in response:gmatch("[^\r\n]+") do
			local clean = line:match("^%s*(.-)%s*$")
			if clean ~= "" then
				table.insert(keyList, clean)
			end
		end
		return keyList
	else
		notify("L·ªói", "Kh√¥ng th·ªÉ t·∫£i key t·ª´ GitHub", 5)
		return {}
	end
end

-- H√†m ki·ªÉm tra key nh·∫≠p v√†o
local function isValidKey(input)
	if not input or input == "" then
		notify("L·ªói", "B·∫°n ch∆∞a nh·∫≠p key!", 4)
		return false
	end

	local keys = getKeyList()
	for _, k in ipairs(keys) do
		if input == k then
			return true
		end
	end

	return false
end

-- üìå CH·ªñ N√ÄY B·∫†N D√ÅN SCRIPT G·ªêC
function loadFarmBoss()
	-- B·∫°n x√≥a ƒëo·∫°n d∆∞·ªõi ƒë√¢y v√† d√°n to√†n b·ªô script farm boss stealth ZENmode X c·ªßa b·∫°n v√†o
	loadstring([[
-- üßä N√∫t RightCtrl ·∫£o ƒë·∫πp, c√≥ ·∫£nh, d√πng cho Delta mobile
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- üì¶ T·∫°o ScreenGui
local gui = Instance.new("ScreenGui")
gui.Name = "RightCtrlVirtual"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.Parent = playerGui

-- üî≤ T·∫°o n√∫t vu√¥ng
local ctrlButton = Instance.new("ImageButton")
ctrlButton.Name = "RightCtrlButton"
ctrlButton.Size = UDim2.new(0, 55, 0, 55)
ctrlButton.Position = UDim2.new(0, 600, 0.10, 0) -- v·ªã tr√≠ cao h∆°n (b√™n tr√°i, gi·ªØa m√†n)
ctrlButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
ctrlButton.BorderSizePixel = 0
ctrlButton.Image = "rbxassetid://88345955642142" -- üîÅ Thay b·∫±ng icon b·∫°n mu·ªën
ctrlButton.Parent = gui

-- üü¶ Bo g√≥c n√∫t
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(1, 0)
corner.Parent = ctrlButton

-- ‚ö™ Vi·ªÅn tr·∫Øng
local stroke = Instance.new("UIStroke")
stroke.Color = Color3.fromRGB(255, 255, 255)
stroke.Thickness = 1.5
stroke.Parent = ctrlButton

-- üëÜ Khi b·∫•m gi·ªØ, gi·∫£ l·∫≠p RightCtrl (Delta h·ªó tr·ª£ keypress)
ctrlButton.MouseButton1Down:Connect(function()
	pcall(function()
		keypress(Enum.KeyCode.RightControl)
	end)
end)
-- Fluent UI
local Library = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

-- tab
local MainWindow = Library:CreateWindow({
    Title = "üíÄRENXüíÄ  |",
    SubTitle = "tiktok:ungdungtutai4 ",
    TabWidth = 120,
    Size = UDim2.fromOffset(520, 300),
    Acrylic = true,
    Theme = "Rose",
    MinimizeKey = Enum.KeyCode.RightControl
})
-- üìÅ Tab Main
local Tabs = {}
Tabs.main = MainWindow:AddTab({Title = "Main"})

-- ·∫©n balo balo
Tabs.main:AddButton({
    Title = "T·∫Øt Balo",
    Description = "·∫®n Inventory",
    Callback = function()
        local player = game:GetService("Players").LocalPlayer
        local gui = player:FindFirstChild("PlayerGui")
        if gui then
            local inv = gui:FindFirstChild("Inventory")
            if inv then
                local mainFrame = inv:FindFirstChild("MainFrame")
                if mainFrame then
                    mainFrame.Visible = false
                else
                    warn("[‚ö†] Kh√¥ng t√¨m th·∫•y 'MainFrame' trong Inventory")
                end
            else
                warn("[‚ö†] Kh√¥ng t√¨m th·∫•y 'Inventory' trong PlayerGui")
            end
        else
            warn("[‚ö†] Kh√¥ng t√¨m th·∫•y PlayerGui")
        end
    end
})
-- hi·ªán balo balo
Tabs.main:AddButton({
    Title = "B·∫≠t L·∫°i Balo",
    Description = "Hi·ªán Inventory tr·ªü l·∫°i",
    Callback = function()
        local player = game:GetService("Players").LocalPlayer
        local gui = player:FindFirstChild("PlayerGui")
        if gui then
            local inv = gui:FindFirstChild("Inventory")
            if inv then
                local mainFrame = inv:FindFirstChild("MainFrame")
                if mainFrame then
                    mainFrame.Visible = true
                else
                    warn("[‚ö†] Kh√¥ng t√¨m th·∫•y 'MainFrame' trong Inventory")
                end
            else
                warn("[‚ö†] Kh√¥ng t√¨m th·∫•y 'Inventory' trong PlayerGui")
            end
        else
            warn("[‚ö†] Kh√¥ng t√¨m th·∫•y PlayerGui")
        end
    end
})
-- ‚öôÔ∏è Bi·∫øn toggle Auto BƒÉng G·∫°c
local AutoBangGac = false
local CanUseBandage = true

-- ü©π Toggle b·∫≠t t·∫Øt Auto BƒÉng G·∫°c
Tabs.main:AddToggle("AutoBangGac", {
    Title = "Auto BƒÉng G·∫°c (HP < 60)",
    Default = false,
    Callback = function(state)
        AutoBangGac = state
        Fluent:Notify({
            Title = "Auto Heal",
            Content = state and "‚úÖ ƒê√£ b·∫≠t t·ª± h·ªìi m√°u khi HP < 60." or "‚ùå ƒê√£ t·∫Øt t·ª± h·ªìi m√°u.",
            Duration = 3
        })
    end
})

-- üì¶ H√†m l·∫•y l·∫°i bƒÉng g·∫°c n·∫øu m·∫•t
local function GetBackpack(itemName)
    local success, err = pcall(function()
        local Knit = game:GetService("ReplicatedStorage"):WaitForChild("KnitPackages")
            :WaitForChild("_Index"):WaitForChild("sleitnick_knit@1.7.0")
            :WaitForChild("knit")
        local RE = Knit.Services.InventoryService.RE.updateInventory

        RE:FireServer("refresh")
        task.wait(1)
        RE:FireServer("eue", itemName)
    end)
    if not success then
        warn("‚ùå L·ªói khi l·∫•y l·∫°i bƒÉng g·∫°c:", err)
    end
end

-- ‚ù§Ô∏è V√≤ng l·∫∑p ki·ªÉm tra m√°u v√† t·ª± d√πng bƒÉng
task.spawn(function()
    while task.wait(1) do
        if AutoBangGac and CanUseBandage then
            local player = game.Players.LocalPlayer
            local char = player.Character
            local humanoid = char and char:FindFirstChild("Humanoid")
            local backpack = player:FindFirstChild("Backpack")

            if humanoid and humanoid.Health < 60 then
                CanUseBandage = false

                -- L·∫•y bƒÉng g·∫°c n·∫øu ch∆∞a c√≥
                if not backpack:FindFirstChild("bƒÉng g·∫°c") then
                    GetBackpack("bƒÉng g·∫°c")
                    task.wait(1.5)
                end

                -- D√πng bƒÉng g·∫°c n·∫øu c√≥
                if backpack:FindFirstChild("bƒÉng g·∫°c") then
                    local tool = backpack:FindFirstChild("bƒÉng g·∫°c")
                    pcall(function()
                        tool.Parent = char
                        task.wait(0.5)
                        humanoid:EquipTool(tool)
                        task.wait(0.5)
                        tool:Activate()
                    end)
                end

                -- Ch·ªù m√°u h·ªìi l·∫°i
                repeat task.wait(1) until humanoid.Health > 80 or not AutoBangGac
                task.wait(2)
                CanUseBandage = true
            end
        end
    end
end)
-- üáªüá≥ Bi·∫øn l∆∞u v≈© kh√≠ ƒë∆∞·ª£c ch·ªçn AttackWeapon = nil

-- üáªüá≥ T·∫°o Tab framboss (gi·∫£ s·ª≠ MainWindow ƒë√£ ƒë∆∞·ª£c t·∫°o t·ª´ Library)
local Tabs = {}
Tabs.framboss = MainWindow:AddTab({ Title = "framboss" })

-- üáªüá≥ N√∫t ch·ªçn v≈© kh√≠
local a = Tabs.framboss:AddButton({
	Title = "Ch·ªçn V≈© Kh√≠",
	Description = "V≈© Kh√≠ Hi·ªán T·∫°i : None",
	Callback = function()
		local weaponButtons = {}

		-- Danh s√°ch v≈© kh√≠ trong balo
		for _, tool in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
			table.insert(weaponButtons, {
				Title = tool.Name,
				Callback = function()
					AttackWeapon = tool.Name
					print("‚úÖ V≈© kh√≠ ƒë√£ ch·ªçn:", tool.Name)
				end
			})
		end

		-- N√∫t ch·ªçn None (t·∫Øt t·ª± trang b·ªã)
		table.insert(weaponButtons, {
			Title = "üîï Kh√¥ng T·ª± Trang B·ªã",
			Callback = function()
				AttackWeapon = nil
				print("‚ùé ƒê√£ t·∫Øt t·ª± trang b·ªã.")
			end
		})

		-- N√∫t tho√°t
		table.insert(weaponButtons, {
			Title = "‚ùå Tho√°t",
			Callback = function()
				print("‚õî ƒê√£ tho√°t ch·ªçn v≈© kh√≠.")
			end
		})

		-- Hi·ªÉn th·ªã dialog ch·ªçn v≈© kh√≠
		MainWindow:Dialog({
			Title = "Ch·ªçn V≈© Kh√≠",
			Content = "H√£y ch·ªçn m·ªôt v≈© kh√≠ t·ª´ balo ho·∫∑c t·∫Øt t·ª± trang b·ªã:",
			Buttons = weaponButtons
		})
	end
})

-- üîÅ C·∫≠p nh·∫≠t m√¥ t·∫£ n√∫t
task.spawn(function()
	while task.wait(1) do
		if AttackWeapon then
			a:SetDesc("V≈© Kh√≠ Hi·ªán T·∫°i : " .. AttackWeapon)
		else
			a:SetDesc("V≈© Kh√≠ Hi·ªán T·∫°i : None")
		end
	end
end)

-- üîÑ T·ª± ƒë·ªông trang b·ªã l·∫°i tool n·∫øu b·ªã m·∫•t
task.spawn(function()
	while task.wait(1) do
		if AttackWeapon and typeof(AttackWeapon) == "string" then
			local lp = game.Players.LocalPlayer
			local char = lp.Character
			local backpack = lp:FindFirstChild("Backpack")

			if char and not char:FindFirstChild(AttackWeapon) and backpack then
				local tool = backpack:FindFirstChild(AttackWeapon)
				if tool then
					tool.Parent = char
					print("üîß ƒê√£ t·ª± trang b·ªã l·∫°i tool:", AttackWeapon)
				end
			end
		end
	end
end)
function loadFarmBoss()
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local lp = Players.LocalPlayer

-- T·∫°o GUI ZENmode X
local gui = Instance.new("ScreenGui")
gui.Name = "FarmBossGUI"
pcall(function()
	gui.Parent = game:FindFirstChildOfClass("CoreGui")
end)
if not gui.Parent then
	gui.Parent = lp:WaitForChild("PlayerGui")
end

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 250, 0, 150)
frame.Position = UDim2.new(0, 20, 0, 100)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BackgroundTransparency = 0.1
frame.BorderSizePixel = 0
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 30)
title.Text = "üíÄRENXüíÄ"
title.BackgroundTransparency = 1
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.GothamBold
title.TextScaled = true

local toggle = Instance.new("TextButton", frame)
toggle.Size = UDim2.new(0, 200, 0, 30)
toggle.Position = UDim2.new(0, 25, 0, 40)
toggle.Text = "B·∫≠t Farm Boss"
toggle.BackgroundColor3 = Color3.fromRGB(60,60,60)
toggle.TextColor3 = Color3.new(1,1,1)
toggle.Font = Enum.Font.Gotham
toggle.TextScaled = true
Instance.new("UICorner", toggle)

local distanceBox = Instance.new("TextBox", frame)
distanceBox.Size = UDim2.new(0, 200, 0, 25)
distanceBox.Position = UDim2.new(0, 25, 0, 80)
distanceBox.PlaceholderText = "Kho·∫£ng c√°ch (VD: 12)"
distanceBox.Text = ""
distanceBox.ClearTextOnFocus = false
distanceBox.BackgroundColor3 = Color3.fromRGB(45,45,45)
distanceBox.TextColor3 = Color3.new(1,1,1)
distanceBox.Font = Enum.Font.Gotham
distanceBox.TextScaled = true
Instance.new("UICorner", distanceBox)

local speedBox = Instance.new("TextBox", frame)
speedBox.Size = UDim2.new(0, 200, 0, 25)
speedBox.Position = UDim2.new(0, 25, 0, 110)
speedBox.PlaceholderText = "T·ªëc ƒë·ªô v√≤ng (VD: 2)"
speedBox.Text = ""
speedBox.ClearTextOnFocus = false
speedBox.BackgroundColor3 = Color3.fromRGB(45,45,45)
speedBox.TextColor3 = Color3.new(1,1,1)
speedBox.Font = Enum.Font.Gotham
speedBox.TextScaled = true
Instance.new("UICorner", speedBox)

-- ===== N√öT C·ªòNG/TR·ª™ =====
local distMinus = Instance.new("TextButton", frame)
distMinus.Size = UDim2.new(0, 25, 0, 25)
distMinus.Position = UDim2.new(0, 0, 0, 80)
distMinus.Text = "-"
distMinus.BackgroundColor3 = Color3.fromRGB(80, 40, 40)
distMinus.TextColor3 = Color3.new(1, 1, 1)
distMinus.Font = Enum.Font.GothamBold
distMinus.TextScaled = true
Instance.new("UICorner", distMinus)

local distPlus = Instance.new("TextButton", frame)
distPlus.Size = UDim2.new(0, 25, 0, 25)
distPlus.Position = UDim2.new(0, 230, 0, 80)
distPlus.Text = "+"
distPlus.BackgroundColor3 = Color3.fromRGB(40, 80, 40)
distPlus.TextColor3 = Color3.new(1, 1, 1)
distPlus.Font = Enum.Font.GothamBold
distPlus.TextScaled = true
Instance.new("UICorner", distPlus)

local speedMinus = Instance.new("TextButton", frame)
speedMinus.Size = UDim2.new(0, 25, 0, 25)
speedMinus.Position = UDim2.new(0, 0, 0, 110)
speedMinus.Text = "-"
speedMinus.BackgroundColor3 = Color3.fromRGB(80, 40, 40)
speedMinus.TextColor3 = Color3.new(1, 1, 1)
speedMinus.Font = Enum.Font.GothamBold
speedMinus.TextScaled = true
Instance.new("UICorner", speedMinus)

local speedPlus = Instance.new("TextButton", frame)
speedPlus.Size = UDim2.new(0, 25, 0, 25)
speedPlus.Position = UDim2.new(0, 230, 0, 110)
speedPlus.Text = "+"
speedPlus.BackgroundColor3 = Color3.fromRGB(40, 80, 40)
speedPlus.TextColor3 = Color3.new(1, 1, 1)
speedPlus.Font = Enum.Font.GothamBold
speedPlus.TextScaled = true
Instance.new("UICorner", speedPlus)

local function adjustValue(box, delta)
    local current = tonumber(box.Text) or 0
    local newValue = math.max(0, math.floor((current + delta) * 10 + 0.5) / 10)
    box.Text = tostring(newValue)
end

distMinus.MouseButton1Click:Connect(function() adjustValue(distanceBox, -0.1) end)
distPlus.MouseButton1Click:Connect(function() adjustValue(distanceBox, 0.1) end)
speedMinus.MouseButton1Click:Connect(function() adjustValue(speedBox, -0.1) end)
speedPlus.MouseButton1Click:Connect(function() adjustValue(speedBox, 0.1) end)
-- ===== H·∫æT N√öT C·ªòNG/TR·ª™ =====

-- Bi·∫øn ƒëi·ªÅu khi·ªÉn
local AutoFarm = false
local orbitConnection, attackConnection
local character, hrp

-- To·∫° ƒë·ªô trung t√¢m c·ªë ƒë·ªãnh
local centerPos = Vector3.new(-2577, 279, -1379)
local orbitAngle = 0 -- G√≥c quay quanh t√¢m

function getTool()
	for _, tool in pairs(lp.Character:GetChildren()) do
		if tool:IsA("Tool") then
			return tool
		end
	end
	return nil
end

function attachStealthMover(hrp)
	local bg = Instance.new("BodyGyro", hrp)
	bg.Name = "ZENgyro"
	bg.MaxTorque = Vector3.new(1e6,1e6,1e6)
	bg.P = 1e4

	local bp = Instance.new("BodyPosition", hrp)
	bp.Name = "ZENpos"
	bp.MaxForce = Vector3.new(1e6,1e6,1e6)
	bp.P = 1e4
	bp.D = 100
end

function removeStealthMover()
	if hrp then
		local bg = hrp:FindFirstChild("ZENgyro")
		local bp = hrp:FindFirstChild("ZENpos")
		if bg then bg:Destroy() end
		if bp then bp:Destroy() end
	end
end

function startFarm()
	character = lp.Character
	hrp = character and character:FindFirstChild("HumanoidRootPart")
	if not character or not hrp then print("[DEBUG][Character]: M·∫•t") return end

	attachStealthMover(hrp)

	orbitConnection = RunService.Heartbeat:Connect(function(dt)
		if not character or not character:FindFirstChild("HumanoidRootPart") then
			character = lp.Character
			hrp = character and character:FindFirstChild("HumanoidRootPart")
			if not hrp then stopFarm() return end
			attachStealthMover(hrp)
		end

		local distance = tonumber(distanceBox.Text) or 10
		local speed = tonumber(speedBox.Text) or 2
		local height = 0 -- c√≥ th·ªÉ ch·ªânh n·∫øu mu·ªën bay cao h∆°n t√¢m

		orbitAngle += speed * dt
		local offset = Vector3.new(math.cos(orbitAngle) * distance, height, math.sin(orbitAngle) * distance)
		local targetPos = centerPos + offset

		updateMover(targetPos, centerPos)
	end)

	attackConnection = RunService.Heartbeat:Connect(function()
		local tool = getTool()
		if tool and tool:FindFirstChild("Handle") then
			tool:Activate()
		end
	end)
end

function stopFarm()
	removeStealthMover()
	if orbitConnection then orbitConnection:Disconnect() orbitConnection = nil end
	if attackConnection then attackConnection:Disconnect() attackConnection = nil end
end

toggle.MouseButton1Click:Connect(function()
	AutoFarm = not AutoFarm
	if AutoFarm then
		toggle.Text = "ƒêang Bay V√≤ng..."
		task.spawn(function()
			while AutoFarm do
				startFarm()
				repeat task.wait(0.2) until not AutoFarm
				stopFarm()
			end
		end)
	else
		toggle.Text = "B·∫≠t Farm Boss"
		stopFarm()
	end
end)
function updateMover(pos, faceTarget)
	if not hrp then return end
	local bg = hrp:FindFirstChild("ZENgyro")
	local bp = hrp:FindFirstChild("ZENpos")

	-- G√≥c l·ªách aim boss (ƒë∆°n v·ªã ƒë·ªô, √¢m l·ªách tr√°i, d∆∞∆°ng l·ªách ph·∫£i)
	local aimOffsetDegrees = -11
	local offsetAngle = math.rad(aimOffsetDegrees)

	-- T√¨m boss g·∫ßn nh·∫•t trong workspace.GiangHo2.NPCs
	local bossFolder = workspace:FindFirstChild("GiangHo2") and workspace.GiangHo2:FindFirstChild("NPCs")
	if bossFolder then
		local nearestBoss, nearestDist
		for _, npc in pairs(bossFolder:GetChildren()) do
			if npc:IsA("Model") and npc:FindFirstChild("HumanoidRootPart") then
				local dist = (npc.HumanoidRootPart.Position - hrp.Position).Magnitude
				if not nearestBoss or dist < nearestDist then
					nearestBoss = npc
					nearestDist = dist
				end
			end
		end
		if nearestBoss then
			local direction = (nearestBoss.HumanoidRootPart.Position - hrp.Position).Unit
			local rotatedDirection = CFrame.Angles(0, offsetAngle, 0):VectorToWorldSpace(direction)
			faceTarget = hrp.Position + rotatedDirection
		end
	end

	if bg and faceTarget then
		local direction = (faceTarget - hrp.Position).Unit
		bg.CFrame = CFrame.new(hrp.Position, hrp.Position + direction)
	end

	if bp then
		bp.Position = pos + Vector3.new(0, math.sin(tick() * 5) * 0.5, 0)
	end
end

local Players = game:GetService("Players")
local lp = Players.LocalPlayer

-- T·∫°o GUI hi·ªÉn th·ªã m√°u boss
local hpGUI = Instance.new("ScreenGui")
hpGUI.Name = "BossHealthDisplay"
hpGUI.Parent = lp:WaitForChild("PlayerGui")

local hpLabel = Instance.new("TextLabel", hpGUI)
hpLabel.Size = UDim2.new(0, 200, 0, 35)
hpLabel.Position = UDim2.new(1, -210, 0, 10) -- G√≥c tr√™n ph·∫£i m√†n h√¨nh, ch·ªânh l·∫°i n·∫øu c·∫ßn
hpLabel.BackgroundTransparency = 0.4
hpLabel.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
hpLabel.TextColor3 = Color3.fromRGB(255, 70, 70)
hpLabel.Font = Enum.Font.GothamBold
hpLabel.TextSize = 20
hpLabel.Text = "M√°u Boss: ƒêang t√¨m..."
Instance.new("UICorner", hpLabel)

-- H√†m t√¨m boss g·∫ßn nh·∫•t trong workspace.GiangHo2.NPCs
local function getBoss()
	local bossFolder = workspace:FindFirstChild("GiangHo2") and workspace.GiangHo2:FindFirstChild("NPCs")
	if not bossFolder then return nil end
	local character = lp.Character
	if not character then return nil end
	local hrp = character:FindFirstChild("HumanoidRootPart")
	if not hrp then return nil end

	local nearestBoss, nearestDist
	for _, npc in pairs(bossFolder:GetChildren()) do
		if npc:IsA("Model") and npc:FindFirstChild("HumanoidRootPart") and npc:FindFirstChild("Humanoid") then
			local dist = (npc.HumanoidRootPart.Position - hrp.Position).Magnitude
			if not nearestBoss or dist < nearestDist then
				nearestBoss = npc
				nearestDist = dist
			end
		end
	end
	return nearestBoss
end

task.spawn(function()
	while true do
		local boss = getBoss()
		if boss and boss:FindFirstChild("Humanoid") then
			local hp = math.floor(boss.Humanoid.Health)
			local max = math.floor(boss.Humanoid.MaxHealth)
			hpLabel.Text = "M√°u Boss: " .. hp .. " / " .. max
		else
			hpLabel.Text = "M√°u Boss: Kh√¥ng t√¨m th·∫•y"
		end
		task.wait(0.2)
	end
end)
end
Tabs.framboss:AddToggle("FarmBossGocToggle", {
    Title = "Farm Boss",
    Callback = function(state)
        if state then
            loadFarmBoss()
        end
    end
})
-- Slider ch·ªânh t·∫ßm nh·∫∑t
Tabs.framboss:AddSlider("LootRadius", {
    Title = "üìè T·∫ßm nh·∫∑t ",
    Description = "Kho·∫£ng c√°ch ƒë·ªÉ t·ª± ƒë·ªông nh·∫∑t",
    Default = 50,
    Min = 10,
    Max = 200,
    Rounding = 0,
    Callback = function(value)
        lootRadius = value
    end
})
-- Toggle b·∫≠t Auto Loot
Tabs.framboss:AddToggle("AutoLoot", {
    Title = "auto nh·∫∑t (teleport)",
    Description = "T·ª± ƒë·ªông tele nh·∫π l·∫°i g·∫ßn r∆∞∆°ng ƒë·ªÉ nh·∫∑t l∆∞u √Ω v√†o khu boss m·ªõi b·∫≠",
    Default = false,
    Callback = function(state)
        autoLootEnabled = state
        wasAutoDisabled = false

        local function startAutoLoot()
            if lootConnection then lootConnection:Disconnect() end
            lootConnection = game:GetService("RunService").RenderStepped:Connect(function()
                local plr = game.Players.LocalPlayer
                local char = plr.Character
                if not char or not char:FindFirstChild("HumanoidRootPart") then return end

                local hrp = char.HumanoidRootPart
                local foundPrompt = false
                local closestPrompt = nil
                local closestDist = math.huge
                local promptPos = nil

                for _, prompt in ipairs(workspace:GetDescendants()) do
                    if prompt:IsA("ProximityPrompt") and prompt.Enabled then
                        local pos
                        if prompt.Parent:IsA("BasePart") then
                            pos = prompt.Parent.Position
                        elseif prompt.Parent:IsA("Attachment") and prompt.Parent.Parent:IsA("BasePart") then
                            pos = prompt.Parent.WorldPosition
                        end

                        if pos then
                            local dist = (hrp.Position - pos).Magnitude
                            if dist <= lootRadius and dist < closestDist then
                                closestPrompt = prompt
                                closestDist = dist
                                promptPos = pos
                            end
                        end
                    end
                end

                if closestPrompt and promptPos then
                    foundPrompt = true
                    -- Teleport nh·∫π ƒë·∫øn g·∫ßn prompt (kh√¥ng ch·∫°m h·∫≥n)
                    local direction = (promptPos - hrp.Position).Unit
                    local newPosition = promptPos - direction * 2 -- c√°ch 2 studs ƒë·ªÉ tr√°nh ƒë√® prompt

                    hrp.CFrame = CFrame.new(newPosition)
                    fireproximityprompt(closestPrompt)
                end

                if not foundPrompt then
                    autoLootEnabled = false
                    wasAutoDisabled = true
                    if lootConnection then lootConnection:Disconnect() end
                    Library:Notify({
                        Title = "Auto Loot",
                        Content = "Kh√¥ng c√≤n g√¨ ƒë·ªÉ loot, t·∫°m d·ª´ng...",
                        Duration = 3
                    })
                end
            end)
        end

        if autoLootEnabled then
            startAutoLoot()
        elseif lootConnection then
            lootConnection:Disconnect()
        end
        -- Lu√¥n ki·ªÉm tra ProximityPrompt
        if not checkConnection then
            checkConnection = game:GetService("RunService").RenderStepped:Connect(function()
                if not autoLootEnabled and wasAutoDisabled then
                    local plr = game.Players.LocalPlayer
                    local char = plr.Character
                    if not char or not char:FindFirstChild("HumanoidRootPart") then return end
                    local hrp = char.HumanoidRootPart

                    for _, prompt in ipairs(workspace:GetDescendants()) do
                        if prompt:IsA("ProximityPrompt") and prompt.Enabled then
                            local pos
                            if prompt.Parent:IsA("BasePart") then
                                pos = prompt.Parent.Position
                            elseif prompt.Parent:IsA("Attachment") and prompt.Parent.Parent:IsA("BasePart") then
                                pos = prompt.Parent.WorldPosition
                            end
                            if pos then
                                local dist = (hrp.Position - pos).Magnitude
                                if dist <= lootRadius then
                                    autoLootEnabled = true
                                    wasAutoDisabled = false
                                    Library:Notify({
                                        Title = "Auto Loot",
                                        Content = "ƒê√£ ph√°t hi·ªán v·∫≠t ph·∫©m, b·∫≠t l·∫°i loot!",
                                        Duration = 3
                                    })
                                    startAutoLoot()
                                    break
                                end
                            end
                        end
                    end
                end
            end)
        end
    end
})
Tabs.framboss:AddButton({
    Title = "üåÄ Gi·∫£m 30% ƒê·ªì H·ªça",
    Description = "TƒÉng FPS v√† gi·∫£m lag cho thi·∫øt b·ªã y·∫øu",
    Callback = function()
        print("[ZENmode X] ƒêang gi·∫£m ƒë·ªì h·ªça...")

        -- Gi·∫£m ch·∫•t l∆∞·ª£ng m√¥i tr∆∞·ªùng
        game.Lighting.GlobalShadows = false
        game.Lighting.FogEnd = 100000
        game.Lighting.Brightness = 1

        -- T·∫Øt hi·ªáu ·ª©ng chi ti·∫øt
        for _, v in pairs(workspace:GetDescendants()) do
            if v:IsA("Decal") or v:IsA("Texture") then
                v.Transparency = 1
            elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
                v.Enabled = false
            elseif v:IsA("Explosion") then
                v:Destroy()
            end
        end

        -- Gi·∫£m ch·∫•t l∆∞·ª£ng v·∫≠t th·ªÉ
        settings().Rendering.QualityLevel = Enum.QualityLevel.Level02

        print("[ZENmode X] ƒê√£ gi·∫£m ƒë·ªì h·ªça xong.")
    end
})
-- ‚è∞ ANTI-AFK sau m·ªói 19.5 ph√∫t (ch·ªëng kick)
task.spawn(function()
	local vu = game:GetService("VirtualUser")

	game:GetService("Players").LocalPlayer.Idled:Connect(function()
		vu:Button2Down(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
		task.wait(1)
		vu:Button2Up(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
		print("‚úÖ Anti-AFK k√≠ch ho·∫°t.")
	end)

	while task.wait(1170) do -- 19 ph√∫t 30 gi√¢y
		vu:Button2Down(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
		task.wait(1)
		vu:Button2Up(Vector2.new(0, 0), workspace.CurrentCamera.CFrame)
		print("üîÅ Anti-AFK t·ª± ƒë·ªông sau 19.5 ph√∫t.")
	end
end)
Tabs.FarmWood = MainWindow:AddTab({ Title = "Farm G·ªó" })

-- üå≥ Toggle Auto Tree Farm
Tabs.FarmWood:AddToggle("AutoFarmToggle", {
    Title = "Auto bay ƒë·∫øn c√¢y",
    Default = false,
    Callback = function(state)
        farming = state
        if farming then
            task.spawn(startFarming)
        end
    end
})

--------------------------------------------------------------------------------

-- üì¶ Services
local Players = game:GetService("Players")
local Rep = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local VIM = game:GetService("VirtualInputManager")

-- üßç‚Äç‚ôÇÔ∏è Player
local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

-- üîÑ C·∫≠p nh·∫≠t hrp khi respawn
player.CharacterAdded:Connect(function(newChar)
    char = newChar
    hrp = newChar:WaitForChild("HumanoidRootPart")
end)

-- üìå C√¢y v√† n∆°i b√°n
local trees = {
    Vector3.new(1665.3, 19.0, -398.2),
    Vector3.new(1696.9, 18.9, -406.2),
    Vector3.new(1728.0, 18.9, -380.2),
    Vector3.new(1699.9, 19.9, -465.6),
    Vector3.new(1626.1, 18.9, -467.8),
    Vector3.new(1723.1, 18.9, -502.5),
    Vector3.new(1726.9, 19.4, -247.0),
    Vector3.new(1635.7, 18.9, -200.7),
    Vector3.new(1645.6, 18.9, -110.6),
    Vector3.new(1678.6, 18.9, -233.9),
}
local sellPos = Vector3.new(1628.5, 22.6, -279.3)

-- üîÑ State
farming = false
_G.AutoEquipAxe = false
_G.AutoArrowMinigame = false
local runningAxeLoop = false
local arrowWatcherConn, runningArrow = nil, false
local toolName = "R√¨u"

-- üöÄ Tween teleport (fix m·∫•t hrp)
local function teleportSmooth(pos)
    if not hrp or not hrp.Parent then return end
    local tween = TweenService:Create(hrp, TweenInfo.new(1.2, Enum.EasingStyle.Linear), {CFrame = CFrame.new(pos)})
    tween:Play()
    tween.Completed:Wait()
end

-- üü¢ Prompt
local function firePromptAt(pos)
    for _, prompt in ipairs(workspace:GetDescendants()) do
        if prompt:IsA("ProximityPrompt") and (prompt.Parent.Position - pos).Magnitude <= 10 then
            fireproximityprompt(prompt, 1)
            break
        end
    end
end

-- üå≤ V√≤ng l·∫∑p ch√≠nh
function startFarming()
    while farming do
        local chopped = 0
        for _, treePos in ipairs(trees) do
            if not farming then return end
            teleportSmooth(treePos)
            wait(1)
            firePromptAt(treePos)
            chopped += 1
            for i = 10, 1, -1 do
                if not farming then return end
                wait(1)
            end
        end

        if chopped >= 10 and farming then
            teleportSmooth(sellPos)
            wait(1)
            firePromptAt(sellPos)
            wait(3)
        end
        wait(1)
    end
end

--------------------------------------------------------------------------------
-- ü™ì AUTO EQUIP R√åU
local function PurchaseAxe()
    local invGui = player:WaitForChild("PlayerGui"):WaitForChild("Inventory")
        :WaitForChild("MainFrame"):WaitForChild("Container")
        :WaitForChild("Main"):WaitForChild("ToolList")
        :WaitForChild("ScrollingFrame")
    local hasAxe = invGui:FindFirstChild(toolName)
    if not hasAxe then
        local shopService = Rep:WaitForChild("KnitPackages")
            :WaitForChild("_Index"):WaitForChild("sleitnick_knit@1.7.0")
            :WaitForChild("knit"):WaitForChild("Services")
            :WaitForChild("ShopService"):WaitForChild("RE"):WaitForChild("buyItem")
        shopService:FireServer(toolName, 1)
        task.wait(1)
    end
end

local function RequestToolFromServer()
    local invService = Rep:WaitForChild("KnitPackages")
        :WaitForChild("_Index"):WaitForChild("sleitnick_knit@1.7.0")
        :WaitForChild("knit"):WaitForChild("Services")
        :WaitForChild("InventoryService"):WaitForChild("RE")
        :WaitForChild("updateInventory")
    invService:FireServer("eue", toolName)
end

local function CheckAndEquipAxe()
    local char = player.Character
    local backpack = player:FindFirstChild("Backpack")
    local humanoid = char and char:FindFirstChildOfClass("Humanoid")
    if not (char and humanoid and backpack) then return end

    local currentTool = char:FindFirstChildOfClass("Tool")
    local axeInBackpack = backpack:FindFirstChild(toolName)

    if (not currentTool or currentTool.Name ~= toolName) and not axeInBackpack then
        RequestToolFromServer()
        task.wait(0.5)
        axeInBackpack = backpack:FindFirstChild(toolName)

        if not axeInBackpack then
            PurchaseAxe()
            axeInBackpack = backpack:FindFirstChild(toolName)
        end
    end

    if axeInBackpack then
        humanoid:EquipTool(axeInBackpack)
    end
end

local function StartAutoEquipLoop()
    if runningAxeLoop then return end
    runningAxeLoop = true
    task.spawn(function()
        while _G.AutoEquipAxe do
            CheckAndEquipAxe()
            task.wait(0.1)
        end
        runningAxeLoop = false
    end)
end

-- üîò Toggle Auto Equip Axe
local ToggleAxe = Tabs.FarmWood:AddToggle("AutoEquipAxe", {
    Title = "Auto L·∫•y R√¨u",
    Default = false,
    Callback = function(state)
        _G.AutoEquipAxe = state
        if state then StartAutoEquipLoop() end
    end
})
player.CharacterAdded:Connect(function()
    if _G.AutoEquipAxe then
        task.wait(0.1)
        StartAutoEquipLoop()
    end
end)

--------------------------------------------------------------------------------
-- üéØ AUTO ARROW MINIGAME
local rotationToKey = {
    [0] = Enum.KeyCode.Right,
    [90] = Enum.KeyCode.Down,
    [180] = Enum.KeyCode.Left,
    [270] = Enum.KeyCode.Up,
}
local function normalizeRotation(rot)
    return (math.floor((rot % 360) / 90 + 0.5) * 90) % 360
end

local function doArrowSequence()
    local gui = player:WaitForChild("PlayerGui")
    local arrowGui = gui:WaitForChild("ArrowMinigame")
    local listFrame = arrowGui:WaitForChild("Arrow"):WaitForChild("List")

    for i = 1, 5 do
        local frame = listFrame:FindFirstChild(tostring(i))
        local img = frame and frame:FindFirstChild("ImageLabel")
        if img then
            local rot = normalizeRotation(img.Rotation)
            local key = rotationToKey[rot]
            if key then
                VIM:SendKeyEvent(true, key, false, game)
                task.wait(0.05)
                VIM:SendKeyEvent(false, key, false, game)
                task.wait(0.1)
            end
        end
    end

    task.wait(3)
    VIM:SendKeyEvent(true, Enum.KeyCode.Space, false, game)
    task.wait(0.05)
    VIM:SendKeyEvent(false, Enum.KeyCode.Space, false, game)
end

local function setupArrowWatcher()
    if runningArrow then return end
    runningArrow = true
    local gui = player:WaitForChild("PlayerGui")
    local arrowGui = gui:WaitForChild("ArrowMinigame")

    if arrowGui.Enabled then doArrowSequence() end
    arrowWatcherConn = arrowGui:GetPropertyChangedSignal("Enabled"):Connect(function()
        if _G.AutoArrowMinigame and arrowGui.Enabled then
            doArrowSequence()
        end
    end)
end

local function disconnectArrowWatcher()
    if arrowWatcherConn then
        arrowWatcherConn:Disconnect()
        arrowWatcherConn = nil
    end
    runningArrow = false
end

-- üîò Toggle Arrow
Tabs.FarmWood:AddToggle("AutoArrowMinigame", {
    Title = "üéØ Auto b·∫•m n√∫t ",
    Default = false,
    Callback = function(state)
        _G.AutoArrowMinigame = state
        if state then setupArrowWatcher() else disconnectArrowWatcher() end
    end
})
local PvPTab = MainWindow:AddTab({ Title = "PvP" })

local spinning = false
local spinSpeed = 5 -- T·ªëc ƒë·ªô m·∫∑c ƒë·ªãnh

-- üéö T·ªëc ƒë·ªô xoay
PvPTab:AddSlider("SpinSpeedSlider", {
	Title = "üåÄ T·ªëc ƒë·ªô Spin",
	Min = 1,
	Max = 500,
	Default = 5,
	Rounding = 1,
	Callback = function(val)
		spinSpeed = val
	end
})

-- üîò Toggle PvP Spin
PvPTab:AddToggle("PvPSpinToggle", {
	Title = "üåÄ PvP Spin (Xoay li√™n t·ª•c)",
	Default = false,
	Callback = function(state)
		spinning = state
		local char = player.Character
		if not char then return end

		local humanoid = char:FindFirstChildOfClass("Humanoid")
		local hrp = char:FindFirstChild("HumanoidRootPart")

		if not humanoid or not hrp then return end

		if state then
			humanoid.AutoRotate = false
			task.spawn(function()
				while spinning and humanoid and hrp do
					hrp.CFrame = hrp.CFrame * CFrame.Angles(0, math.rad(spinSpeed), 0)
					task.wait(0.03)
				end
			end)
		else
			humanoid.AutoRotate = true
		end
	end
})

-- üîÅ Khi h·ªìi sinh, t·ª± b·∫≠t l·∫°i spin n·∫øu ƒëang b·∫≠t
player.CharacterAdded:Connect(function(char)
	if spinning then
		task.wait(0.5)
		local humanoid = char:WaitForChild("Humanoid", 5)
		if humanoid then humanoid.AutoRotate = false end
	end
end)
Tabs.FramNpc = MainWindow:AddTab({ Title = "FarmNPC" })
-- Th√™m toggle Fluent UI
Tabs.FramNpc:AddToggle("FarmNPC", {
    Title = "B·∫≠t Farm NPC",
    Default = false,
    Callback = function(state)
        _G.FramNPC = state
        if state then
            task.spawn(function()
                while _G.FramNPC do
                    framLoop() -- g·ªçi h√†m farm g·ªëc
                    task.wait()
                end
            end)
        end
    end
})

-- ƒê√¢y l√† h√†m farm g·ªëc b·∫°n gi·ªØ nguy√™n y chang:
function framLoop()
    local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local PathfindingService = game:GetService("PathfindingService")

local Player = Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
local Humanoid = Character:WaitForChild("Humanoid")

-- Bi·∫øn to√†n c·ª•c farm
_G.FramNPC = false
_G.Range = 10
_G.Speed = 5

local function getNearestCityNPC()
    local nearest, distance = nil, math.huge
    for _, npc in pairs(workspace:GetDescendants()) do
        if npc:IsA("Model") and npc:FindFirstChild("HumanoidRootPart") and string.lower(npc.Name):find("citynpc") then
            local dist = (npc.HumanoidRootPart.Position - HumanoidRootPart.Position).Magnitude
            if dist < distance then
                distance = dist
                nearest = npc
            end
        end
    end
    return nearest
end

local function moveToTarget(target)
    local path = PathfindingService:CreatePath()
    path:ComputeAsync(HumanoidRootPart.Position, target.Position)
    local points = path:GetWaypoints()

    for _, point in ipairs(points) do
        if (HumanoidRootPart.Position - target.Position).Magnitude <= _G.Range then return end
        Humanoid:MoveTo(point.Position)
        Humanoid.MoveToFinished:Wait()
    end
end

local function startOrbiting(target)
    local angle = 0
    local radius = _G.Range or 10
    local speed = _G.Speed or 2
    local connection

    connection = RunService.RenderStepped:Connect(function()
        if not target or not target:FindFirstChild("HumanoidRootPart") then
            connection:Disconnect()
            return
        end

        angle = angle + speed * 0.03
        local x = math.cos(angle) * radius
        local z = math.sin(angle) * radius
        local newPosition = target.HumanoidRootPart.Position + Vector3.new(x, 0, z)

        TweenService:Create(
            HumanoidRootPart,
            TweenInfo.new(0.1, Enum.EasingStyle.Linear),
            {CFrame = CFrame.new(newPosition, target.HumanoidRootPart.Position)}
        ):Play()
    end)

    return connection
end

local function autoAttack()
    local tool = Player.Character:FindFirstChildOfClass("Tool")
    if tool and tool:FindFirstChild("Handle") then
        pcall(function()
            tool:Activate()
        end)
    end
end

local function framLoop()
    while _G.FramNPC do
        local target = getNearestCityNPC()
        if target then
            moveToTarget(target.HumanoidRootPart)
            if (HumanoidRootPart.Position - target.HumanoidRootPart.Position).Magnitude <= _G.Range + 2 then
                local orbit = startOrbiting(target)

                while target and target:FindFirstChild("Humanoid") and target.Humanoid.Health > 0 and _G.FramNPC do
                    autoAttack()
                    wait(0.3)
                end

                if orbit then orbit:Disconnect() end
            end
        end
        wait(0.2)
    end
end

function AutoPickupItems()
    spawn(function()
        while wait(1) do
            if not _G.FramNPC then continue end
            for _, item in pairs(workspace:GetChildren()) do
                if item:IsA("Tool") or item.Name:lower():find("item") then
                    if (item.Position - HumanoidRootPart.Position).Magnitude < 20 then
                        firetouchinterest(item, HumanoidRootPart, 0)
                        wait()
                        firetouchinterest(item, HumanoidRootPart, 1)
                    end
                end
            end
        end
    end)
end

local function startFarm()
    _G.FramNPC = true
    task.spawn(framLoop)
    AutoPickupItems()
end

local function stopFarm()
    _G.FramNPC = false
end

-- GUI --

local lp = Players.LocalPlayer

local gui = Instance.new("ScreenGui")
gui.Name = "FarmBossGUI"
pcall(function()
	gui.Parent = game:FindFirstChildOfClass("CoreGui")
end)
if not gui.Parent then
	gui.Parent = lp:WaitForChild("PlayerGui")
end

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 250, 0, 150)
frame.Position = UDim2.new(0, 20, 0, 100)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BackgroundTransparency = 0.1
frame.BorderSizePixel = 0
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 30)
title.Text = "üíÄRENX Fram NpcüíÄ"
title.BackgroundTransparency = 1
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.GothamBold
title.TextScaled = true

local toggle = Instance.new("TextButton", frame)
toggle.Size = UDim2.new(0, 200, 0, 30)
toggle.Position = UDim2.new(0, 25, 0, 40)
toggle.Text = "B·∫≠t Farm Npc"
toggle.BackgroundColor3 = Color3.fromRGB(60,60,60)
toggle.TextColor3 = Color3.new(1,1,1)
toggle.Font = Enum.Font.Gotham
toggle.TextScaled = true
Instance.new("UICorner", toggle)

local distanceBox = Instance.new("TextBox", frame)
distanceBox.Size = UDim2.new(0, 200, 0, 25)
distanceBox.Position = UDim2.new(0, 25, 0, 80)
distanceBox.PlaceholderText = "Kho·∫£ng c√°ch (VD: 12)"
distanceBox.Text = tostring(_G.Range)
distanceBox.ClearTextOnFocus = false
distanceBox.BackgroundColor3 = Color3.fromRGB(45,45,45)
distanceBox.TextColor3 = Color3.new(1,1,1)
distanceBox.Font = Enum.Font.Gotham
distanceBox.TextScaled = true
Instance.new("UICorner", distanceBox)

local speedBox = Instance.new("TextBox", frame)
speedBox.Size = UDim2.new(0, 200, 0, 25)
speedBox.Position = UDim2.new(0, 25, 0, 110)
speedBox.PlaceholderText = "T·ªëc ƒë·ªô v√≤ng (VD: 1)"
speedBox.Text = tostring(_G.Speed)
speedBox.ClearTextOnFocus = false
speedBox.BackgroundColor3 = Color3.fromRGB(45,45,45)
speedBox.TextColor3 = Color3.new(1,1,1)
speedBox.Font = Enum.Font.Gotham
speedBox.TextScaled = true
Instance.new("UICorner", speedBox)

local isFarming = false

toggle.MouseButton1Click:Connect(function()
    if not isFarming then
        local distanceVal = tonumber(distanceBox.Text)
        if distanceVal and distanceVal >= 5 and distanceVal <= 30 then
            _G.Range = distanceVal
        else
            _G.Range = 10
            distanceBox.Text = tostring(_G.Range)
        end

        local speedVal = tonumber(speedBox.Text)
        if speedVal and speedVal >= 1 and speedVal <= 20 then
            _G.Speed = speedVal
        else
            _G.Speed = 5
            speedBox.Text = tostring(_G.Speed)
        end

        isFarming = true
        toggle.Text = "T·∫Øt Farm NPC"
        startFarm()
    else
        isFarming = false
        toggle.Text = "B·∫≠t Farm NPC"
        stopFarm()
    end
end)

-- C·∫≠p nh·∫≠t ngay khi ng∆∞·ªùi d√πng r·ªùi textbox (FocusLost)
distanceBox.FocusLost:Connect(function()
    local val = tonumber(distanceBox.Text)
    if val and val >= 5 and val <= 30 then
        _G.Range = val
    else
        distanceBox.Text = tostring(_G.Range)
    end
end)

speedBox.FocusLost:Connect(function()
    local val = tonumber(speedBox.Text)
    if val and val >= 1 and val <= 20 then
        _G.Speed = val
    else
        speedBox.Text = tostring(_G.Speed)
    end
end)
end
	]])()
end
-- B·∫Øt s·ª± ki·ªán khi b·∫•m n√∫t
button.MouseButton1Click:Connect(function()
	local key = textbox.Text
	if isValidKey(key) then
		notify("‚úÖ Th√†nh c√¥ng", "Key h·ª£p l·ªá! ƒêang ch·∫°y script...", 4)
		gui:Destroy()
		loadFarmBoss()
	else
		notify("‚ùå Sai key", "Key kh√¥ng ƒë√∫ng ho·∫∑c h·∫øt h·∫°n", 4)
	end
end)